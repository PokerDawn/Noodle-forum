"use strict";(self["webpackChunkvue3_springboot"]=self["webpackChunkvue3_springboot"]||[]).push([[625],{1625:function(e,t,n){n.r(t);var l=n(3396),a=(n(7658),n(3824)),i=n(4870),o=n(65),s=n(387),u=n(1008);t["default"]=(0,l.aZ)({setup(){const e=(new Date).toLocaleDateString()+" "+(new Date).toLocaleTimeString(),t=(0,o.oR)(),n=()=>{t.commit("GetActive",0),a.Z.push("/home/index")},c=(0,i.qj)({title:"",context:"",uid:t.state.uid,username:t.state.username,time:e,image:null}),r=[],m=async e=>{if(""==e.context||""==e.title)return void(0,u.z8)({type:"error",message:"标题或内容不能为空"});r.map((t=>{e.context=e.context.replace(new RegExp(t,"g"),"**")}));const{data:n}=await(0,s.Bg)(e);console.log(n),200==n.code?(t.commit("GetActive",0),a.Z.replace("/home/index"),(0,u.z8)({type:"success",message:"发布成功"})):(0,u.z8)({type:"error",message:"发布失败"})},p=(0,i.iH)(null),g=async e=>{const t=e.target.files[0];if("image"!==t.type.substring(0,5))return u.z8.warning("只能上传图片！");p.value=t.name;const n=new FileReader;n.readAsDataURL(t),console.log(n),n.onload=function(){c.image=this.result}};return()=>(0,l.Wm)("div",{class:"release_box"},[(0,l.Wm)("h2",null,[(0,l.Uk)("发表")]),(0,l.Wm)("div",{class:"input-box"},[(0,l.Wm)("label",null,[(0,l.Uk)("标题")]),(0,l.Wm)("input",{type:"text",value:c.title,onInput:e=>c.title=e.target.value},null)]),(0,l.Wm)("div",{class:"input-box"},[(0,l.Wm)("label",null,[(0,l.Uk)("内容")]),(0,l.Wm)("textarea",{value:c.context,onInput:e=>c.context=e.target.value},null)]),(0,l.Wm)("div",{class:"file"},[p.value?p.value:"点击上传图片",(0,l.Wm)("input",{type:"file",onInput:g},null)]),(0,l.Wm)("div",{class:"btn-box"},[(0,l.Wm)("div",null,[(0,l.Wm)("button",{onClick:n},[(0,l.Uk)("返回")]),(0,l.Wm)("button",{onClick:()=>m(c)},[(0,l.Uk)("点击发表")])])])])}})}}]);
//# sourceMappingURL=625.fa3ce0d9.js.map