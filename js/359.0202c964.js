"use strict";(self["webpackChunkvue3_springboot"]=self["webpackChunkvue3_springboot"]||[]).push([[359],{5359:function(e,t,a){a.r(t);var s=a(3396),l=a(4870),n=a(65),r=a(1008),o=a(387);t["default"]=(0,s.aZ)({setup(){const e=(0,n.oR)(),t=(new Date).toLocaleDateString()+" "+(new Date).toLocaleTimeString(),a=(0,l.qj)({uid:e.state.uid,username:e.state.username,content:null,time:t,list:Array(),Interval:null,avatar:e.state.avatar}),c=async(e,t)=>{const{data:s}=await(0,o._C)(e,t);Array.from(a.list)!==Array.from(s.data.records)&&(a.list=s.data.records),200==s.code&&setTimeout((()=>{const e=document.querySelector(".message_box");e.clientHeight+e.scrollTop===e.scrollHeight&&m()}),100)},i=async()=>{const t={uid:a.uid,username:a.username,content:a.content,time:a.time,avatar:e.state.avatar},{data:s}=await(0,o.nl)(t);if(200==s.code)return a.content=null,c(1,100),m(),r.z8.success("发送成功")},m=()=>{setTimeout((()=>{const e=document.querySelector(".message_box");window.scrollTo(0,e.clientHeight)}),1e3)};return(0,s.bv)((()=>{c(1,50),m(),a.Interval=setInterval((()=>{c(1,100)}),5e3)})),(0,s.Jd)((()=>{clearInterval(a.Interval)})),()=>(0,s.Wm)("div",{class:"chat_box"},[(0,s.Wm)("div",{class:"chat_rightbox"},[(0,s.Wm)("div",{style:"text-align: center; line-height: 50px;color:white"},[(0,s.Uk)("公共聊天室")]),(0,s.Wm)("div",{style:"height: 70%; overflow:auto; border-top: 1px solid white",class:"message_box"},[a.list.map((t=>t.uid==e.state.uid?(0,s.Wm)("div",{class:"message_box2"},[(0,s.Wm)("div",{class:"avatar_message1"},null),(0,s.Wm)("div",{class:"bubble_message_right"},[(0,s.Wm)("div",{class:"green_message"},[t.content])])]):(0,s.Wm)("div",{class:"message_box1"},[(0,s.Wm)("label",{class:"avatar_message"},[(0,s.Wm)("img",{src:t.avatar,alt:""},null)]),(0,s.Wm)("div",{class:"message_box111"},[(0,s.Wm)("label",{class:"message_name"},[t.username,(0,s.Uk)(" "),(0,s.Wm)("label",{style:"color:gray"},[t.time])]),(0,s.Wm)("div",{class:"bubble_message_left"},[(0,s.Wm)("div",{class:"blue_message"},[t.content])])])])))]),(0,s.Wm)("div",{style:"height: 40%",class:""},[(0,s.Wm)("textarea",{class:"chat_textarea",value:a.content,onInput:e=>a.content=e.target.value},null),(0,s.Wm)("div",{style:"text-align: right; padding-right: 10px"},[(0,s.Wm)("button",{class:"chat_button",onClick:i},[(0,s.Uk)("发送")])])])])])}})}}]);
//# sourceMappingURL=359.0202c964.js.map